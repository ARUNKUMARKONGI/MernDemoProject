const express = require("express")
const mongoose = require("mongoose")
const cors = require("cors")

const app = express()
app.use(cors())
app.use(express.json())

mongoose.connect("mongodb://localhost:27017/employee")

const emp_schema = new mongoose.Schema({
    emp_id:String,
    emp_name:String,
    dept:String,
    salary:Number
})

const emp_model = mongoose.model("emp",emp_schema)

app.post("/addemp",(req,res)=>{
    const emp = new emp_model({
        emp_id:req.body.emp_id,
        emp_name:req.body.emp_name,
        dept:req.body.dept,
        salary:req.body.salary
    })
    emp.save()
    res.send("employee added")
})

app.get("/getemp",(req,res)=>{
    emp_model.find().then(data=>res.json(data))
})

app.listen(5000)
